---
import { projects, otherProjects } from "../storage/projects";
import { Carousel } from "./react/Carousel";
import ProjectCard from "./ui/ProjectCard.astro";
import ThemedButton from "./ui/ThemedButton.astro";
---

<style>
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(28px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .project-entry {
    opacity: 0;
    animation: fadeUp 0.65s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  }
  .project-entry:nth-child(1) { animation-delay: 0.05s; }
  .project-entry:nth-child(2) { animation-delay: 0.18s; }
  .project-entry:nth-child(3) { animation-delay: 0.31s; }
  .project-entry:nth-child(4) { animation-delay: 0.44s; }

  /* Número decorativo grande */
  .project-number {
    font-size: 4.5rem;
    font-weight: 900;
    line-height: 1;
    letter-spacing: -0.04em;
    opacity: 0.12;
    user-select: none;
    pointer-events: none;
    color: white;
    flex-shrink: 0;
  }

  /* Línea divisora bajo el título */
  .title-line {
    display: block;
    margin-top: 4px;
    height: 2px;
    width: 48px;
    border-radius: 999px;
    background: linear-gradient(to right, rgb(34 211 238), transparent);
  }

  /* Repo link */
  .repo-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 0.78rem;
    font-weight: 600;
    letter-spacing: 0.04em;
    text-transform: uppercase;
    padding: 6px 14px;
    border-radius: 8px;
    border: 1px solid rgba(34, 211, 238, 0.3);
    color: rgb(34, 211, 238);         
    background: rgba(34, 211, 238, 0.05);
    transition: background 0.2s ease, border-color 0.2s ease, transform 0.15s ease;
    text-decoration: none;
  }
  .repo-link:hover {
    background: rgba(34, 211, 238, 0.12);
    border-color: rgba(34, 211, 238, 0.6);
    transform: translateY(-1px);
  }

  /* Tags */
  .tag-pill {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.03em;
    padding: 4px 10px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.08);
    transition: transform 0.15s ease, box-shadow 0.15s ease;
  }
  .tag-pill:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  }

  /* Revista cards */
  .magazine-preview {
    display: block;
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.25s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.25s ease;
    text-decoration: none;
  }
  .magazine-preview:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 18px 36px rgba(0,0,0,0.45);
  }
  .magazine-preview img {
    display: block;
    width: 100%;
    height: auto;
  }
</style>

<!-- Proyectos de programación -->
{projects.map(({ title, description, images, links, tags }, i) => (
  <div class="project-entry">
    <ProjectCard>
      <!-- Header: número + título -->
      <div class="flex items-start gap-3">
        <span class="project-number" aria-hidden="true">
          {String(i + 1).padStart(2, '0')}
        </span>
        <div class="flex-1 min-w-0 pt-2">
          <h3 class="text-white text-2xl font-semibold leading-tight">{title}</h3>
          <span class="title-line" />
        </div>
      </div>

      <!-- Descripción — clase original -->
      <p class="lg:text-center text-sm lg:text-base text-tertiary-gray mb-1">
        {description}
      </p>

      <!-- Carrusel -->
      <Carousel images={images} client:visible />

      <!-- Etiquetas — clases originales + pill shape -->
      <div class="flex gap-2 flex-wrap mt-2">
        {tags.map((tag) => (
          <span class={`tag-pill ${tag?.class} text-white`}>
            <tag.icon class="size-4" /> {tag.name}
          </span>
        ))}
      </div>

      <!-- Links -->
      <div class="flex gap-2 flex-wrap">
        {links.map(({ name, href }) => (
          <a
            href={href}
            target="_blank"
            rel="noopener noreferrer"
            class="repo-link"
          >
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
              <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
            </svg>
            {name}
          </a>
        ))}
      </div>
    </ProjectCard>
  </div>
))}

<!-- Otros proyectos (Revistas) -->
<ProjectCard>
  {/* Información */}
  <h3 class="text-white text-2xl text-center font-semibold">
    {otherProjects.title}
  </h3>
  <p class="lg:text-center text-sm lg:text-base text-tertiary-gray mb-1">
    {otherProjects.description}
  </p>

  {/* Links */}
  <span class="flex justify-evenly gap-2 flex-wrap">
    {
      otherProjects.links.map(({ name, image, href }) => (
        <ThemedButton
          href={href}
          class="rounded-lg"
        >
          <img src={image} alt={name} class="py-1 lg:py-2 w-60 h-full" />
        </ThemedButton>
      ))
    }
  </span>
</ProjectCard>